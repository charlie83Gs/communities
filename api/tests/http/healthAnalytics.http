### Variables
@baseUrl = http://localhost:3000/api/v1
@authToken = Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
@communityId = 123e4567-e89b-12d3-a456-426614174000

### ==============================================
### WEALTH ANALYTICS
### ==============================================

### Get Wealth Overview - Default (30 days)
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview
Authorization: {{authToken}}

### Get Wealth Overview - 7 Days
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview?timeRange=7d
Authorization: {{authToken}}

### Get Wealth Overview - 90 Days
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview?timeRange=90d
Authorization: {{authToken}}

### Get Wealth Overview - 1 Year
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview?timeRange=1y
Authorization: {{authToken}}

### Get Wealth Overview - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview

### Get Wealth Overview - Non-existent Community
GET {{baseUrl}}/communities/00000000-0000-0000-0000-000000000000/health/wealth/overview
Authorization: {{authToken}}

### Get Wealth Items - Default (30 days)
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/items
Authorization: {{authToken}}

### Get Wealth Items - 7 Days
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/items?timeRange=7d
Authorization: {{authToken}}

### Get Wealth Items - 90 Days
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/items?timeRange=90d
Authorization: {{authToken}}

### Get Wealth Items - 1 Year
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/items?timeRange=1y
Authorization: {{authToken}}

### Get Wealth Items - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/items

### Get Aggregated Wealth - Current active shares
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/aggregated
Authorization: {{authToken}}

### Get Aggregated Wealth - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/aggregated

### Get Aggregated Wealth - Non-existent Community
GET {{baseUrl}}/communities/00000000-0000-0000-0000-000000000000/health/wealth/aggregated
Authorization: {{authToken}}

### ==============================================
### TRUST ANALYTICS
### ==============================================

### Get Trust Overview - Default (30 days)
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview
Authorization: {{authToken}}

### Get Trust Overview - 7 Days
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview?timeRange=7d
Authorization: {{authToken}}

### Get Trust Overview - 90 Days
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview?timeRange=90d
Authorization: {{authToken}}

### Get Trust Overview - 1 Year
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview?timeRange=1y
Authorization: {{authToken}}

### Get Trust Overview - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview

### Get Trust Distribution
GET {{baseUrl}}/communities/{{communityId}}/health/trust/distribution
Authorization: {{authToken}}

### Get Trust Distribution - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/trust/distribution

### Get Trust Distribution - Non-existent Community
GET {{baseUrl}}/communities/00000000-0000-0000-0000-000000000000/health/trust/distribution
Authorization: {{authToken}}

### ==============================================
### NEEDS ANALYTICS
### ==============================================

### Get Needs Overview - Default (30 days)
GET {{baseUrl}}/communities/{{communityId}}/health/needs/overview
Authorization: {{authToken}}

### Get Needs Overview - 7 Days
GET {{baseUrl}}/communities/{{communityId}}/health/needs/overview?timeRange=7d
Authorization: {{authToken}}

### Get Needs Overview - 90 Days
GET {{baseUrl}}/communities/{{communityId}}/health/needs/overview?timeRange=90d
Authorization: {{authToken}}

### Get Needs Overview - 1 Year
GET {{baseUrl}}/communities/{{communityId}}/health/needs/overview?timeRange=1y
Authorization: {{authToken}}

### Get Needs Overview - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/needs/overview

### Get Needs Overview - Non-existent Community
GET {{baseUrl}}/communities/00000000-0000-0000-0000-000000000000/health/needs/overview
Authorization: {{authToken}}

### Get Needs Items - Default (30 days)
GET {{baseUrl}}/communities/{{communityId}}/health/needs/items
Authorization: {{authToken}}

### Get Needs Items - 7 Days
GET {{baseUrl}}/communities/{{communityId}}/health/needs/items?timeRange=7d
Authorization: {{authToken}}

### Get Needs Items - 90 Days
GET {{baseUrl}}/communities/{{communityId}}/health/needs/items?timeRange=90d
Authorization: {{authToken}}

### Get Needs Items - 1 Year
GET {{baseUrl}}/communities/{{communityId}}/health/needs/items?timeRange=1y
Authorization: {{authToken}}

### Get Needs Items - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/needs/items

### Get Aggregated Needs - All recurrence patterns
GET {{baseUrl}}/communities/{{communityId}}/health/needs/aggregated
Authorization: {{authToken}}

### Get Aggregated Needs - Unauthorized (no token)
GET {{baseUrl}}/communities/{{communityId}}/health/needs/aggregated

### Get Aggregated Needs - Non-existent Community
GET {{baseUrl}}/communities/00000000-0000-0000-0000-000000000000/health/needs/aggregated
Authorization: {{authToken}}

### ==============================================
### AUTHORIZATION TESTS
### ==============================================

### Test Insufficient Trust (requires trust >= 20 or admin)
# This will return 403 if user has trust < 20 and is not admin
GET {{baseUrl}}/communities/{{communityId}}/health/wealth/overview
Authorization: {{authToken}}

### Test Admin Access (should work regardless of trust score)
# Admin users should have access to all analytics
GET {{baseUrl}}/communities/{{communityId}}/health/trust/overview
Authorization: {{authToken}}

### ==============================================
### EXPECTED RESPONSES
### ==============================================

# Wealth Overview Response Example:
# {
#   "status": "success",
#   "data": {
#     "openShares": 5,
#     "totalShares": 20,
#     "activeCategories": 8,
#     "timeSeriesData": [
#       {
#         "date": "2025-11-01",
#         "shares": 2,
#         "requests": 5,
#         "fulfilled": 3
#       },
#       ...
#     ]
#   }
# }

# Wealth Items Response Example:
# {
#   "status": "success",
#   "data": {
#     "items": [
#       {
#         "categoryName": "Objects",
#         "subcategoryName": "Physical Items",
#         "itemName": "Carrots",
#         "shareCount": 10,
#         "valuePoints": 10.00,
#         "trend": [
#           {
#             "date": "2025-11-01",
#             "count": 2
#           },
#           ...
#         ]
#       },
#       ...
#     ]
#   }
# }

# Aggregated Wealth Response Example:
# {
#   "status": "success",
#   "data": {
#     "data": [
#       {
#         "itemId": "123e4567-e89b-12d3-a456-426614174001",
#         "itemName": "Carrots",
#         "categoryName": "Objects",
#         "activeShares": 5,
#         "totalValuePoints": 15.00,
#         "sharerCount": 3,
#         "totalQuantity": 50
#       },
#       {
#         "itemId": "123e4567-e89b-12d3-a456-426614174002",
#         "itemName": "Mobility Assistance",
#         "categoryName": "Services",
#         "activeShares": 3,
#         "totalValuePoints": 30.00,
#         "sharerCount": 2,
#         "totalQuantity": 15
#       },
#       ...
#     ]
#   }
# }

# Trust Overview Response Example:
# {
#   "status": "success",
#   "data": {
#     "totalPeerTrust": 120,
#     "totalAdminTrust": 30,
#     "totalTrust": 150,
#     "averageTrust": 18.75,
#     "trustPerDay": 5.00,
#     "timeSeriesData": [
#       {
#         "date": "2025-11-01",
#         "cumulativePeerTrust": 80,
#         "cumulativeAdminTrust": 20,
#         "cumulativeTotal": 100
#       },
#       {
#         "date": "2025-11-02",
#         "cumulativePeerTrust": 120,
#         "cumulativeAdminTrust": 30,
#         "cumulativeTotal": 150
#       },
#       ...
#     ]
#   }
# }

# Trust Distribution Response Example:
# {
#   "status": "success",
#   "data": {
#     "distribution": [
#       {
#         "trustLevel": "New",
#         "minScore": 0,
#         "maxScore": 9,
#         "userCount": 5
#       },
#       {
#         "trustLevel": "Stable",
#         "minScore": 10,
#         "maxScore": 49,
#         "userCount": 12
#       },
#       {
#         "trustLevel": "Trusted",
#         "minScore": 50,
#         "maxScore": 999999,
#         "userCount": 3
#       }
#     ]
#   }
# }

# Error Response Examples:
# 401 Unauthorized:
# {
#   "status": "error",
#   "message": "Unauthorized"
# }

# 403 Forbidden:
# {
#   "status": "error",
#   "message": "Forbidden: requires trust score of 20 or admin role"
# }

# 404 Not Found:
# {
#   "status": "error",
#   "message": "Community not found"
# }

# Needs Overview Response Example:
# {
#   "status": "success",
#   "data": {
#     "totalActiveNeeds": 15,
#     "totalActiveWants": 8,
#     "activeMembers": 12,
#     "activeCouncils": 3,
#     "objectsVsServices": {
#       "objects": 10,
#       "services": 5
#     },
#     "timeSeriesData": [
#       {
#         "date": "2025-11-01",
#         "needs": 3,
#         "wants": 1
#       },
#       ...
#     ]
#   }
# }

# Needs Items Response Example:
# {
#   "status": "success",
#   "data": {
#     "items": [
#       {
#         "categoryName": "Objects",
#         "itemName": "Carrots",
#         "priority": "need",
#         "recurrence": "weekly",
#         "totalUnitsNeeded": 25,
#         "memberCount": 5,
#         "source": "member"
#       },
#       {
#         "categoryName": "Services",
#         "itemName": "Mobility Assistance",
#         "priority": "need",
#         "recurrence": "daily",
#         "totalUnitsNeeded": 10,
#         "memberCount": 3,
#         "source": "both"
#       },
#       ...
#     ]
#   }
# }

# Aggregated Needs Response Example:
# {
#   "status": "success",
#   "data": {
#     "data": [
#       {
#         "recurrence": "one-time",
#         "items": [
#           {
#             "itemId": "123e4567-e89b-12d3-a456-426614174001",
#             "itemName": "Moving Assistance",
#             "categoryName": "Services",
#             "needsTotal": 5,
#             "wantsTotal": 2,
#             "totalUnits": 7,
#             "participantCount": 4
#           }
#         ]
#       },
#       {
#         "recurrence": "daily",
#         "items": [
#           {
#             "itemId": "123e4567-e89b-12d3-a456-426614174002",
#             "itemName": "Mobility Assistance",
#             "categoryName": "Services",
#             "needsTotal": 10,
#             "wantsTotal": 0,
#             "totalUnits": 10,
#             "participantCount": 3
#           },
#           {
#             "itemId": "123e4567-e89b-12d3-a456-426614174003",
#             "itemName": "Bread",
#             "categoryName": "Objects",
#             "needsTotal": 8,
#             "wantsTotal": 2,
#             "totalUnits": 10,
#             "participantCount": 5
#           }
#         ]
#       },
#       {
#         "recurrence": "weekly",
#         "items": [
#           {
#             "itemId": "123e4567-e89b-12d3-a456-426614174004",
#             "itemName": "Carrots",
#             "categoryName": "Objects",
#             "needsTotal": 20,
#             "wantsTotal": 5,
#             "totalUnits": 25,
#             "participantCount": 5
#           }
#         ]
#       },
#       {
#         "recurrence": "monthly",
#         "items": []
#       }
#     ]
#   }
# }
