NODE_ENV=development
PORT=3000

# Database
DATABASE_URL=postgresql://api_user:api_password@localhost:5432/api_db

# Keycloak Authentication (v26.3.5)
KEYCLOAK_URL=http://localhost:8081
KEYCLOAK_REALM=share-app
KEYCLOAK_CLIENT_ID=share-app-backend
KEYCLOAK_CLIENT_SECRET=your-client-secret-change-in-production
# When running the API outside docker, prefer localhost; inside docker, point to http://keycloak:8080
KEYCLOAK_JWKS_URI=http://localhost:8081/realms/share-app/protocol/openid-connect/certs
KEYCLOAK_ISSUER=http://localhost:8081/realms/share-app
# Optional: comma-separated audiences to accept (e.g., backend and frontend clients)
KEYCLOAK_ALLOWED_AUDIENCES=share-app-backend,share-app-frontend
# Admin service account (used by Admin REST API). Defaults to app realm/client when not set.
KEYCLOAK_ADMIN_REALM=share-app
KEYCLOAK_ADMIN_CLIENT_ID=share-app-backend
KEYCLOAK_ADMIN_CLIENT_SECRET=your-admin-client-secret-change-in-production

# OpenFGA Authorization
# Use 'http://openfga:8080' if your app runs in Docker, 'http://localhost:8080' if running locally
OPENFGA_API_URL=http://localhost:8080
OPENFGA_STORE_ID=
OPENFGA_AUTHORIZATION_MODEL_ID=
OPENFGA_API_TOKEN=
OPENFGA_STORE_NAME=share-app
# Optional: OpenFGA init retries (useful for docker-compose startup ordering)
OPENFGA_INIT_MAX_ATTEMPTS=15
OPENFGA_INIT_DELAY_MS=5000

# Note: OpenFGA database migrations are NOT managed by application code
# Migrations are handled by infrastructure:
# - Docker Compose: openfga_migrate service
# - Kubernetes: init containers or Jobs
# - Manual: docker run openfga/openfga migrate --datastore-engine postgres --datastore-uri "..."
