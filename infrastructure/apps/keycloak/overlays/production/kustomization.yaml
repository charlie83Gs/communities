apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Keycloak - Production
# Identity and access management with production realm configuration
# Depends on: PostgreSQL cluster for Keycloak

resources:
  - ../../base
  - postgres-keycloak-cluster.yaml
  - keycloak-db-password.yaml
  - keycloak-admin-password.yaml

configMapGenerator:
  # Production realm configuration
  - name: keycloak-realm
    namespace: share-app
    files:
      - realm-export.json=../../base/keycloak/realm-prod.json

patches:
  # Production HelmRelease configuration
  - path: ../../../overlays/production/keycloak/helmrelease-patch.yaml
    target:
      kind: HelmRelease
      name: keycloak
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Keycloak - Production
# Identity and access management with production realm configuration
# Depends on: PostgreSQL cluster for Keycloak

resources:
  - ../../base
  - postgres-keycloak-cluster.yaml
  - keycloak-db-password.yaml
  - keycloak-admin-password.yaml

configMapGenerator:
  # Production realm configuration
  - name: keycloak-realm
    namespace: share-app
    files:
      - realm-export.json=../../base/keycloak/realm-prod.json

